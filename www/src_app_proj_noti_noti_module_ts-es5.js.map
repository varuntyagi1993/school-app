{"version":3,"sources":["webpack:///src/app/proj/noti/noti-routing.module.ts","webpack:///src/app/proj/noti/noti.module.ts","webpack:///src/app/proj/noti/noti.page.ts","webpack:///src/app/proj/noti/noti.page.scss","webpack:///src/app/proj/noti/noti.page.html"],"names":["routes","path","component","NotiPage","NotiPageRoutingModule","NgModule","imports","RouterModule","exports","NotiPageModule","CommonModule","FormsModule","IonicModule","declarations","providers","DatePipe","generalts","auth","router","none","notifi","token","localStorage","getItem","console","log","getnoti","da","oi","format","id","full_d","navigate","link","data","g_put","subscribe","noti_read","event","setTimeout","next_page_url","noti_scrol","absent","target","complete","index","length","element","push","undefined","disabled","infiniteScroll","loading","load","present","stud","c_stu","g_get","dismiss","error","status_code","message","status","loginAgain","GeneralService","AuthService","Router","ViewChildren","IonInfiniteScroll","Component","selector","template"],"mappings":"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","file":"src_app_proj_noti_noti_module_ts-es5.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\n\nimport { NotiPage } from \"./noti.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: NotiPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotiPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule, DatePipe } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { NotiPageRoutingModule } from \"./noti-routing.module\";\n\nimport { NotiPage } from \"./noti.page\";\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, NotiPageRoutingModule],\n  declarations: [NotiPage],providers:[DatePipe]\n})\nexport class NotiPageModule {}\n","import { Component, OnInit, ViewChild, ViewChildren } from \"@angular/core\";\nimport { GeneralService } from \"src/app/services/general.service\";\nimport { AuthService } from \"src/app/services/auth.service\";\nimport { IonInfiniteScroll } from \"@ionic/angular\";\nimport { Router } from \"@angular/router\";\nimport * as moment from 'moment';\n\n@Component({\n  selector: \"app-noti\",\n  templateUrl: \"./noti.page.html\",\n  styleUrls: [\"./noti.page.scss\"]\n})\nexport class NotiPage implements OnInit {\n  @ViewChildren(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n\n  token: any;\n  num: any;\n  none: boolean = false;\n  notifi = [];\n  next_page_url: any;\n  constructor(\n    public generalts: GeneralService,\n    public auth: AuthService,\n    public router: Router\n  ) {}\n\n  ngOnInit() {}\n  ionViewWillEnter() {\n    this.token = localStorage.getItem(\"pas_tok\");\n    console.log(\"afs\");\n    this.getnoti();\n  }\n  datP(da){\n    // var o=new Date(da).toUTCString();\n    // var gmtDateTime = moment.utc(da, \"YYYY-MM-DD HH\")\n    // var local = gmtDateTime.local().format('YYYY-MMM-DD h:mm A');\nvar oi=moment(da).format('lll'); \nreturn oi;\n//console.log(da,\"got date\",o,gmtDateTime,\"local\",local,\"oi\",oi);\n  }\n  read_noti(id, full_d) {\n    this.router.navigate([\"/noti-view\", full_d]);\n\n    console.log(id, \"id\");\n\n    var link = \"notifications/\" + id + \"/read\";\n    console.log(link, \"link\");\n    var data = \"\";\n    this.auth.g_put(data, link, this.token).subscribe(noti_read => {\n      console.log(noti_read, \"noti_read\");\n    });\n  }\n\n  loadData(event) {\n    setTimeout(() => {\n      console.log(\"Done\", this.next_page_url);\n\n      // App logic to determine if all data is loaded\n      // and disable the infinite scroll last_page_url last_page_url\n      var link = this.next_page_url;\n      console.log(link, \"link0o0\");\n      this.auth.noti_scrol(link+\"&limit=25\", this.token).subscribe(absent => {\n        console.log(absent.next_page_url, \"loabsentadData123\");\n        event.target.complete();\n\n        this.next_page_url = absent.next_page_url;\n\n        for (let index = 0; index < absent.data.length; index++) {\n          console.log(absent.data, \"loabsentadData12399887\");\n          const element = absent.data[index];\n          this.notifi.push(element);\n        }\n\n        console.log(this.notifi, \"loabsentadData\", absent.data);\n      });\n      // console.log(absent, \"loadData\");\n      if (link == undefined||link == null) {\n        event.target.disabled = true;\n      }\n    }, 500);\n  }\n\n  toggleInfiniteScroll() {\n    console.log(this.infiniteScroll, \"toggleInfiniteScroll\");\n\n    this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\n  }\n\n  async getnoti() {\n    const load = await this.generalts.loading(\"Loading ...\");\n    await load.present();\n\n    var stud = localStorage.getItem(\"c_stud\");\n    var data = \"\";\n    var c_stu = localStorage.getItem(\"c_stud\");\n\n    //this.dateMulti = [];\n    // var link = \"notifications\";\n    var link = \"student/\" + c_stu + \"/notifications?limit=25\";\n    //var link = \"notifications?limit=25\";\n    console.log(link, \"link\");\n    this.auth.g_get(data, link, this.token).subscribe(absent => {\n      this.next_page_url = absent.next_page_url;\n      this.notifi = absent.data;\n      console.log(absent, \"absent78\", absent.data);\n\n      load.dismiss();\n      if (absent.data.length == 0) {\n        this.none = true;\n      } else {\n        this.none = false;\n      }\n    },error => {\n      load.dismiss();\n      console.error(\"Error!\", error.status_code, error.message);\n      if(error.status == 401 ) {\n        this.auth.loginAgain();\n        //this.router.navigateByUrl('/login');\n      }else if (error.status_code == 400) {\n        //this.err = error.message;\n      }\n    });\n  }\n}\n","export default \".unread {\\n  text-align: center;\\n  background: #ae5c50;\\n  color: #ffffff;\\n}\\n.unread h4 {\\n  color: #ffffff;\\n}\\n.unread p span {\\n  color: #ffffff;\\n}\\n.read_hdr {\\n  float: right;\\n  color: #cc897f;\\n}\\n.unread_hdr {\\n  float: right;\\n  color: #ffffff;\\n}\\n.readd {\\n  text-align: center;\\n  background: #dcdcdc;\\n  color: #020202;\\n}\\n.readd h4 {\\n  color: #ae5c50;\\n}\\n.readd p span {\\n  color: #020202;\\n}\\n.time {\\n  float: right;\\n  margin: 4px;\\n}\\nh4,\\np {\\n  margin: 4px;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  height: 1.2em;\\n  white-space: nowrap;\\n}\\nh4 {\\n  margin: 8px;\\n  margin-left: 5px;\\n  font-size: 14px;\\n  margin-bottom: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7QUFDRjtBQUFFO0VBQ0UsY0FBQTtBQUVKO0FBQ0k7RUFDRSxjQUFBO0FBQ047QUFHQTtFQUNFLFlBQUE7RUFDQSxjQUFBO0FBQUY7QUFFQTtFQUNFLFlBQUE7RUFDQSxjQUFBO0FBQ0Y7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FBQ0Y7QUFBRTtFQUNFLGNBQUE7QUFFSjtBQUNJO0VBQ0UsY0FBQTtBQUNOO0FBSUE7RUFDRSxZQUFBO0VBQ0EsV0FBQTtBQURGO0FBSUE7O0VBRUUsV0FBQTtFQUNBLHVCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUFERjtBQUdBO0VBRUUsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FBREYiLCJmaWxlIjoibm90aS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudW5yZWFkIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBiYWNrZ3JvdW5kOiAjYWU1YzUwO1xuICBjb2xvcjogI2ZmZmZmZjs7XG4gIGg0IHtcbiAgICBjb2xvcjogI2ZmZmZmZjtcbiAgfVxuICBwIHtcbiAgICBzcGFuIHtcbiAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgIH1cbiAgfVxufVxuLnJlYWRfaGRyIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBjb2xvcjogI2NjODk3Zjtcbn1cbi51bnJlYWRfaGRyIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgLy8gY29sb3I6ICNhZTVjNTA7XG59XG4ucmVhZGQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6ICNkY2RjZGM7XG4gIGNvbG9yOiAjMDIwMjAyO1xuICBoNCB7XG4gICAgY29sb3I6ICNhZTVjNTA7XG4gIH1cbiAgcCB7XG4gICAgc3BhbiB7XG4gICAgICBjb2xvcjogIzAyMDIwMjtcbiAgICB9XG4gIH1cbn1cblxuLnRpbWUge1xuICBmbG9hdDogcmlnaHQ7XG4gIG1hcmdpbjogNHB4O1xuICAvLyAgY29sb3I6ICMwMDA7XG59XG5oNCxcbnAge1xuICBtYXJnaW46IDRweDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGhlaWdodDogMS4yZW07XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5oNCB7XG4gIC8vIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luOiA4cHg7XG4gIG1hcmdpbi1sZWZ0OiA1cHg7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luLWJvdHRvbTogMDtcbn1cbiJdfQ== */\";","export default \"<ion-header>\\n    <ion-toolbar color=\\\"menu\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"home\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>Notifications </ion-title>\\n       \\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <div *ngFor=\\\"let no of notifi\\\">\\n        <ion-card (click)=\\\"read_noti(no.id,no)\\\" style=\\\"text-align: left;padding: 0px 10px; \\\" [ngClass]=\\\"no.read==0 ? 'unread' : 'readd'\\\">\\n            <h4 *ngIf=\\\"no.type=='ATTENDANCE'\\\">\\n                Attendance\\n                <span><ion-icon\\n                    name=\\\"mail\\\"\\n                    *ngIf=\\\"no.read==0\\\"\\n                    class=\\\"unread_hdr\\\"\\n                ></ion-icon></span>\\n\\n                <span><ion-icon\\n                    name=\\\"mail-open\\\"\\n                    *ngIf=\\\"no.read!=0\\\"\\n                    class=\\\"read_hdr\\\"\\n                ></ion-icon></span>\\n            </h4>\\n            \\n            <h4  *ngIf=\\\"no.type!='ATTENDANCE'\\\">\\n                Notice<span><ion-icon\\n            name=\\\"mail\\\"\\n            *ngIf=\\\"no.read==0\\\"\\n            class=\\\"unread_hdr\\\"\\n          ></ion-icon\\n        ></span>\\n\\n                <span><ion-icon\\n            name=\\\"mail-open\\\"\\n            *ngIf=\\\"no.read!=0\\\"\\n            class=\\\"read_hdr\\\"\\n          ></ion-icon\\n        ></span>\\n            </h4>\\n\\n            <!-- [ngClass]=\\\"no.read==0 ? 'unread_hdr' : 'read_hdr'\\\" -->\\n            <!-- | date:'MMM d yy, h:mm a' -->\\n            <p>{{no.message}}<br /></p>\\n            <!-- <p class=\\\"time\\\">{{no.date| date:'MMM dd yy, h:mm a'}}</p> -->\\n            <p class=\\\"time\\\">{{datP(no.date)}}</p>\\n        </ion-card>\\n    </div>\\n\\n    <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n        <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Loading more Notifications...\\\">\\n        </ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n\\n    <ion-card *ngIf=\\\"none==true\\\" style=\\\"text-align: center;color: #000;\\\">\\n        <h3>No Notifications</h3>\\n        <img src=\\\"../../../assets/images/noti.png\\\" class=\\\"imf\\\" />\\n    </ion-card>\\n</ion-content>\";"]}