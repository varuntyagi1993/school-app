{"version":3,"sources":["./src/app/proj/noti/noti-routing.module.ts","./src/app/proj/noti/noti.module.ts","./src/app/proj/noti/noti.page.ts","./src/app/proj/noti/noti.page.scss","./src/app/proj/noti/noti.page.html"],"names":[],"mappings":"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","file":"src_app_proj_noti_noti_module_ts-es2015.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\n\nimport { NotiPage } from \"./noti.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: NotiPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotiPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule, DatePipe } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { NotiPageRoutingModule } from \"./noti-routing.module\";\n\nimport { NotiPage } from \"./noti.page\";\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, NotiPageRoutingModule],\n  declarations: [NotiPage],providers:[DatePipe]\n})\nexport class NotiPageModule {}\n","import { Component, OnInit, ViewChild, ViewChildren } from \"@angular/core\";\nimport { GeneralService } from \"src/app/services/general.service\";\nimport { AuthService } from \"src/app/services/auth.service\";\nimport { IonInfiniteScroll } from \"@ionic/angular\";\nimport { Router } from \"@angular/router\";\nimport * as moment from 'moment';\n\n@Component({\n  selector: \"app-noti\",\n  templateUrl: \"./noti.page.html\",\n  styleUrls: [\"./noti.page.scss\"]\n})\nexport class NotiPage implements OnInit {\n  @ViewChildren(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n\n  token: any;\n  num: any;\n  none: boolean = false;\n  notifi = [];\n  next_page_url: any;\n  constructor(\n    public generalts: GeneralService,\n    public auth: AuthService,\n    public router: Router\n  ) {}\n\n  ngOnInit() {}\n  ionViewWillEnter() {\n    this.token = localStorage.getItem(\"pas_tok\");\n    console.log(\"afs\");\n    this.getnoti();\n  }\n  datP(da){\n    // var o=new Date(da).toUTCString();\n    // var gmtDateTime = moment.utc(da, \"YYYY-MM-DD HH\")\n    // var local = gmtDateTime.local().format('YYYY-MMM-DD h:mm A');\nvar oi=moment(da).format('lll'); \nreturn oi;\n//console.log(da,\"got date\",o,gmtDateTime,\"local\",local,\"oi\",oi);\n  }\n  read_noti(id, full_d) {\n    this.router.navigate([\"/noti-view\", full_d]);\n\n    console.log(id, \"id\");\n\n    var link = \"notifications/\" + id + \"/read\";\n    console.log(link, \"link\");\n    var data = \"\";\n    this.auth.g_put(data, link, this.token).subscribe(noti_read => {\n      console.log(noti_read, \"noti_read\");\n    });\n  }\n\n  loadData(event) {\n    setTimeout(() => {\n      console.log(\"Done\", this.next_page_url);\n\n      // App logic to determine if all data is loaded\n      // and disable the infinite scroll last_page_url last_page_url\n      var link = this.next_page_url;\n      console.log(link, \"link0o0\");\n      this.auth.noti_scrol(link+\"&limit=25\", this.token).subscribe(absent => {\n        console.log(absent.next_page_url, \"loabsentadData123\");\n        event.target.complete();\n\n        this.next_page_url = absent.next_page_url;\n\n        for (let index = 0; index < absent.data.length; index++) {\n          console.log(absent.data, \"loabsentadData12399887\");\n          const element = absent.data[index];\n          this.notifi.push(element);\n        }\n\n        console.log(this.notifi, \"loabsentadData\", absent.data);\n      });\n      // console.log(absent, \"loadData\");\n      if (link == undefined||link == null) {\n        event.target.disabled = true;\n      }\n    }, 500);\n  }\n\n  toggleInfiniteScroll() {\n    console.log(this.infiniteScroll, \"toggleInfiniteScroll\");\n\n    this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\n  }\n\n  async getnoti() {\n    const load = await this.generalts.loading(\"Loading ...\");\n    await load.present();\n\n    var stud = localStorage.getItem(\"c_stud\");\n    var data = \"\";\n    var c_stu = localStorage.getItem(\"c_stud\");\n\n    //this.dateMulti = [];\n    // var link = \"notifications\";\n    var link = \"student/\" + c_stu + \"/notifications?limit=25\";\n    //var link = \"notifications?limit=25\";\n    console.log(link, \"link\");\n    this.auth.g_get(data, link, this.token).subscribe(absent => {\n      this.next_page_url = absent.next_page_url;\n      this.notifi = absent.data;\n      console.log(absent, \"absent78\", absent.data);\n\n      load.dismiss();\n      if (absent.data.length == 0) {\n        this.none = true;\n      } else {\n        this.none = false;\n      }\n    },error => {\n      load.dismiss();\n      console.error(\"Error!\", error.status_code, error.message);\n      if(error.status == 401 ) {\n        this.auth.loginAgain();\n        //this.router.navigateByUrl('/login');\n      }else if (error.status_code == 400) {\n        //this.err = error.message;\n      }\n    });\n  }\n}\n","export default \".unread {\\n  text-align: center;\\n  background: #ae5c50;\\n  color: #ffffff;\\n}\\n.unread h4 {\\n  color: #ffffff;\\n}\\n.unread p span {\\n  color: #ffffff;\\n}\\n.read_hdr {\\n  float: right;\\n  color: #cc897f;\\n}\\n.unread_hdr {\\n  float: right;\\n  color: #ffffff;\\n}\\n.readd {\\n  text-align: center;\\n  background: #dcdcdc;\\n  color: #020202;\\n}\\n.readd h4 {\\n  color: #ae5c50;\\n}\\n.readd p span {\\n  color: #020202;\\n}\\n.time {\\n  float: right;\\n  margin: 4px;\\n}\\nh4,\\np {\\n  margin: 4px;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  height: 1.2em;\\n  white-space: nowrap;\\n}\\nh4 {\\n  margin: 8px;\\n  margin-left: 5px;\\n  font-size: 14px;\\n  margin-bottom: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7QUFDRjtBQUFFO0VBQ0UsY0FBQTtBQUVKO0FBQ0k7RUFDRSxjQUFBO0FBQ047QUFHQTtFQUNFLFlBQUE7RUFDQSxjQUFBO0FBQUY7QUFFQTtFQUNFLFlBQUE7RUFDQSxjQUFBO0FBQ0Y7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FBQ0Y7QUFBRTtFQUNFLGNBQUE7QUFFSjtBQUNJO0VBQ0UsY0FBQTtBQUNOO0FBSUE7RUFDRSxZQUFBO0VBQ0EsV0FBQTtBQURGO0FBSUE7O0VBRUUsV0FBQTtFQUNBLHVCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUFERjtBQUdBO0VBRUUsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FBREYiLCJmaWxlIjoibm90aS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudW5yZWFkIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBiYWNrZ3JvdW5kOiAjYWU1YzUwO1xuICBjb2xvcjogI2ZmZmZmZjs7XG4gIGg0IHtcbiAgICBjb2xvcjogI2ZmZmZmZjtcbiAgfVxuICBwIHtcbiAgICBzcGFuIHtcbiAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgIH1cbiAgfVxufVxuLnJlYWRfaGRyIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBjb2xvcjogI2NjODk3Zjtcbn1cbi51bnJlYWRfaGRyIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgLy8gY29sb3I6ICNhZTVjNTA7XG59XG4ucmVhZGQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6ICNkY2RjZGM7XG4gIGNvbG9yOiAjMDIwMjAyO1xuICBoNCB7XG4gICAgY29sb3I6ICNhZTVjNTA7XG4gIH1cbiAgcCB7XG4gICAgc3BhbiB7XG4gICAgICBjb2xvcjogIzAyMDIwMjtcbiAgICB9XG4gIH1cbn1cblxuLnRpbWUge1xuICBmbG9hdDogcmlnaHQ7XG4gIG1hcmdpbjogNHB4O1xuICAvLyAgY29sb3I6ICMwMDA7XG59XG5oNCxcbnAge1xuICBtYXJnaW46IDRweDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGhlaWdodDogMS4yZW07XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5oNCB7XG4gIC8vIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luOiA4cHg7XG4gIG1hcmdpbi1sZWZ0OiA1cHg7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luLWJvdHRvbTogMDtcbn1cbiJdfQ== */\";","export default \"<ion-header>\\n    <ion-toolbar color=\\\"menu\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"home\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>Notifications </ion-title>\\n       \\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <div *ngFor=\\\"let no of notifi\\\">\\n        <ion-card (click)=\\\"read_noti(no.id,no)\\\" style=\\\"text-align: left;padding: 0px 10px; \\\" [ngClass]=\\\"no.read==0 ? 'unread' : 'readd'\\\">\\n            <h4 *ngIf=\\\"no.type=='ATTENDANCE'\\\">\\n                Attendance\\n                <span><ion-icon\\n                    name=\\\"mail\\\"\\n                    *ngIf=\\\"no.read==0\\\"\\n                    class=\\\"unread_hdr\\\"\\n                ></ion-icon></span>\\n\\n                <span><ion-icon\\n                    name=\\\"mail-open\\\"\\n                    *ngIf=\\\"no.read!=0\\\"\\n                    class=\\\"read_hdr\\\"\\n                ></ion-icon></span>\\n            </h4>\\n            \\n            <h4  *ngIf=\\\"no.type!='ATTENDANCE'\\\">\\n                Notice<span><ion-icon\\n            name=\\\"mail\\\"\\n            *ngIf=\\\"no.read==0\\\"\\n            class=\\\"unread_hdr\\\"\\n          ></ion-icon\\n        ></span>\\n\\n                <span><ion-icon\\n            name=\\\"mail-open\\\"\\n            *ngIf=\\\"no.read!=0\\\"\\n            class=\\\"read_hdr\\\"\\n          ></ion-icon\\n        ></span>\\n            </h4>\\n\\n            <!-- [ngClass]=\\\"no.read==0 ? 'unread_hdr' : 'read_hdr'\\\" -->\\n            <!-- | date:'MMM d yy, h:mm a' -->\\n            <p>{{no.message}}<br /></p>\\n            <!-- <p class=\\\"time\\\">{{no.date| date:'MMM dd yy, h:mm a'}}</p> -->\\n            <p class=\\\"time\\\">{{datP(no.date)}}</p>\\n        </ion-card>\\n    </div>\\n\\n    <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n        <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Loading more Notifications...\\\">\\n        </ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n\\n    <ion-card *ngIf=\\\"none==true\\\" style=\\\"text-align: center;color: #000;\\\">\\n        <h3>No Notifications</h3>\\n        <img src=\\\"../../../assets/images/noti.png\\\" class=\\\"imf\\\" />\\n    </ion-card>\\n</ion-content>\";"],"sourceRoot":"webpack:///"}